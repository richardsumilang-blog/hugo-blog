<!DOCTYPE html>
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="language" content="english" />
<meta name="robots" content="all" />


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />


<meta name="keywords" content="Asana, Bitbucket, Git, GitHub" />
<meta name="news_keywords" content="Asana, Bitbucket, Git, GitHub" />


<meta property="og:type" content="article" />

<meta property="og:title" content="How to reference Bitbucket commits to Asana" />
<meta property="og:site_name" content="Top Secret Labs" />
<meta property="og:url" content="https://www.richardsumilang.com/programming/scm/git/how-to-link-bitbucket-to-asana/" />
<meta property="og:locale" content="en_US" />

  
  
  
  
  <meta property="article:published_time" content="2015-01-31" />
  <meta property="article:modified_time" content="2015-01-31" />




  <meta property="article:tag" content="Asana" /><meta property="article:tag" content="Bitbucket" /><meta property="article:tag" content="Git" /><meta property="article:tag" content="GitHub" />



<meta name="twitter:card" content="summary" />

<meta name="twitter:site" content="@richardsumilang" />
<meta name="twitter:title" content="How to reference Bitbucket commits to Asana - Top Secret Labs - Richard Sumilang" />
<meta name="twitter:creator" content="@richardsumilang" />
<meta name="twitter:domain" content="richardsumilang.com" />



<meta name="generator" content="Hugo 0.54.0" />


  <base href="https://www.richardsumilang.com/" />
  <title>How to reference Bitbucket commits to Asana - Top Secret Labs - Richard Sumilang</title>

  <link rel="canonical" href="https://www.richardsumilang.com/programming/scm/git/how-to-link-bitbucket-to-asana/" />



  <link rel="stylesheet" type="text/css" href="https://www.richardsumilang.com/_app/main.2797a9753da94e60856c.css" />



<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.richardsumilang.com/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.richardsumilang.com/favicon.ico" />



  

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl+ '&gtm_preview=env-7&gtm_auth=j8O4JXfBl0ZE8KUkCt1uKw&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TD3RCSD');</script>



<script>
  var SITE_BASE_URL='https:\/\/www.richardsumilang.com\/';
</script>


  <script defer src="https://www.richardsumilang.com/_app/main.97cea160.js"></script>
  



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TD3RCSD&gtm_preview=env-7&gtm_auth=j8O4JXfBl0ZE8KUkCt1uKw&gtm_cookies_win=x"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  




</head>

<body>


<div id="logo">
  <a href="https://www.richardsumilang.com/"><img src="https://www.richardsumilang.com/images/header-logo.png" /></a>
</div>


<ul id="navigation">
  
  
  <li><a href="/categories/apps/" >apps</a></li>
  
  <li><a href="/categories/electronics/" >electronics</a></li>
  
  <li><a href="/categories/etc/" >etc</a></li>
  
  <li><a href="/categories/networking/" >networking</a></li>
  
  <li><a href="/categories/programming/" >programming</a></li>
  
  <li><a href="/categories/servers/" >servers</a></li>
  
  <li><a href="/categories/unix-like/" >unix-like</a></li>
  
</ul>



<section id="articles">
  <article>
    

    <header class="heading">
      <h2><a href="https://www.richardsumilang.com/programming/scm/git/how-to-link-bitbucket-to-asana/">How to reference Bitbucket commits to Asana</a></h2>
      
    </header>

    <div class="details">
      <p><strong>tl;dr:</strong> Use <a href="https://github.com/rsumilang/asana-post-commit" title="Asana Post Commit">this</a> <strong>post-commit</strong> hook.</p>

<p>I found <a href="https://github.com/Spaceman-Labs/asana-post-commit" title="Asana Post Commit">this great</a> git <strong>post-commit</strong> hook by Spaceman Labs. It works by
adding a comment to your Asana ticket when you reference your commit message by
id. For example, <strong>&ldquo;Fixing issue #12345.&rdquo;</strong> This adds a comment to your ticket:</p>

<pre>Just committed %commit-id with message:

"Fixing issue #1234"

to repository %repo-name</pre>

<p>This works by making a curl request to Asana&rsquo;s REST API on your behalf while
sending the above message as the comment. While this is great, it could be
better by providing links to your Bitbucket changeset. I&rsquo;ve made the necessary
edits to do so in the <strong>post-commit</strong> hook. The updated message now looks like
this:</p>

<pre>Committed %link-to-commit with message:

"Fixing issue #1234"

to repository %repo-name</pre>

<h3 id="how-it-works">How it works</h3>

<p>I loop through all the remote repositories configured for the repo and search
for either a bitbucket.org or github.com in their URLs. Once  one is found, I
extract the repo name from the URL and build the link to the changeset.</p>

<p><strong>Note:</strong> If you are using Github then I recommend  using the free
<a href="https://asana.com/apps/github" title="Asana GitHub App">Asana service</a> provided. I merely included the GitHub code as an example.</p>

<p>The original code from here takes over and parses out the ticket number and does
the curl request.</p>

<h3 id="installation">Installation</h3>

<p>Grab my edited <strong>post-commit</strong> hook from <a href="https://github.com/rsumilang/asana-post-commit" title="Asana Post Commit">github</a> and drop it into your repos
<code>.git/hooks</code> directory. Make sure to <code>chmod</code> the file to <code>0755</code>. Lastly, grab
your <a href="https://app.asana.com/-/account_api" title="Asana Account API">Asana key</a> and run <code>git config --global user.asana-key
&quot;MY_ASANA_API_KEY&quot;</code>.</p>

<h3 id="afterthoughts">Afterthoughts</h3>

<p>Please let me know if you have any suggestions. I&rsquo;m thinking of possibly editing
the git commit message to link back to the Asana ticket for the sake of
cross-linking but this might require additional configuration&hellip; Unless project
id is added as part of the ticket number. Ie: #<sup>12345</sup>&frasl;<sub>98765</sub>. Please feel free to
add your input! :)</p>
    </div>

    
    <div class="tags">
      
      <a href="/tags/asana">Asana</a>
      
      <a href="/tags/bitbucket">Bitbucket</a>
      
      <a href="/tags/git">Git</a>
      
      <a href="/tags/github">GitHub</a>
      
    </div>
    

    <div class="meta">
      <i class="fa fa-clock-o"></i> Jan 31, 2015
      
        
          <a href="/categories/servers"><i class="fa fa-bookmark"></i> Servers</a>
        
      
    </div>

    <div class="share-buttons">
  <a title="Facebook Share" target="_blank" href="//www.facebook.com/sharer.php?u=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fscm%2fgit%2fhow-to-link-bitbucket-to-asana%2f&t=How%20to%20reference%20Bitbucket%20commits%20to%20Asana"><span class="fa fa-facebook"></span></a>
  <a title="Twitter Share" target="_blank" href="//twitter.com/intent/tweet?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fscm%2fgit%2fhow-to-link-bitbucket-to-asana%2f&text=How%20to%20reference%20Bitbucket%20commits%20to%20Asana&tw_p=tweetbutton"><span class="fa fa-twitter"></span></a>
  <a title="Google+ Share" target="_blank" href="//plus.google.com/share?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fscm%2fgit%2fhow-to-link-bitbucket-to-asana%2f"><span class="fa fa-google-plus"></span></a>
  <a title="Pinterest Share" target="_blank" href="//pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fscm%2fgit%2fhow-to-link-bitbucket-to-asana%2f&media=&description=How%20to%20reference%20Bitbucket%20commits%20to%20Asana"><span class="fa fa-pinterest"></span></a>
</div>


  </article>

  
<div id="disqus_thread"></div>
<script>
  var disqus_shortname = 'richardsumilang';
  var disqus_identifier = '477 http:\/\/www.richardsumilang.com\/blog\/?p=477';
  var disqus_url = 'https:\/\/www.richardsumilang.com\/programming\/scm\/git\/how-to-link-bitbucket-to-asana\/';

  (function() {
    if (window.location.hostname === "localhost") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


</section>


<footer id="sub-footer">

  <a href="https://photography.richardsumilang.com" title="Photography"><span class="fa fa-camera-retro"></span> Photography</a>

  
  <a href="https://www.youtube.com/richardsumilang" title="YouTube" target="_blank"><span class="fa fa-youtube"></span> YouTube</a>
  

  
  <a href="https://instagram.com/RichardSumilang" title="Follow me on Instagram" target="_blank"><span class="fa fa-instagram"></span> Instagram</a>
  

  
  <a href="https://twitter.com/richardsumilang" title="@richardsumilang on Twitter" target="_blank"><span class="fa fa-twitter"></span> Twitter</a>
  

  
  <a href="https://facebook.com/rsumilang" title="Add me on Facebook" target="_blank"><span class="fa fa-facebook"></span> Facebook</a>
  

  
  <a href="https://www.linkedin.com/in/richardsumilang" title="Linkedin" target="_blank"><span class="fa fa-linkedin"></span> LinkedIn</a>
  

  
  <a href="https://plus.google.com/103897788753346013902/posts" title="Google+" target="_blank"><span class="fa fa-google-plus"></span> Google+</a>
  

  
  <a href="https://www.pinterest.com/rsumilang/" title="Pinterest" target="_blank"><span class="fa fa-pinterest"></span> Pinterest</a>
  

  
  <a href="https://github.com/rsumilang" title="rsumilang on GitHub" target="_blank"><span class="fa fa-github"></span> GitHub</a>
  
</footer>


<footer id="footer">
  <div class="info">
    <div class="column about">
      <h3 class="title">About the Author</h3>
      <p><img width="80" class="user-icon" src="https://www.richardsumilang.com/images/me.png" alt="icon" />
        I'm Richard Sumilang, an artisan, DIY'er, entrepreneur, programmer,
        photographer, etc. Basically, I like to create stuff.
      </p>
      <p>I am based in the Los Angeles area and you can reach me via <a href="mailto:me@richardsumilang.com">email</a>.</p>
    </div>
    <div class="column categories">
      <h3 class="title">Categories</h3>
      <ul>
        
        
        <li><a href="/categories/apps">apps</a></li>
        
        <li><a href="/categories/electronics">electronics</a></li>
        
        <li><a href="/categories/etc">etc</a></li>
        
        <li><a href="/categories/networking">networking</a></li>
        
        <li><a href="/categories/programming">programming</a></li>
        
        <li><a href="/categories/servers">servers</a></li>
        
        <li><a href="/categories/unix-like">unix-like</a></li>
        
      </ul>
    </div>
    <div class="column stay-in-touch">
      <h3 class="title">Stay in touch</h3>
      <p>
        Follow my occasional rants on <a  href="//twitter.com/richardsumilang" title="@richardsumilang on Twitter" target="_blank">twitter</a>
        or <a href="//facebook.com/rsumilang" title="Richard Sumilang on Facebook" target="_blank">facebook</a>. From time to time I will also
        post videos on my <a href="richardsumilang" target="_blank">YouTube channel</a>.
      </p>
      <p>Geeks should know that my public work is on
        <a href="//github.com/rsumilang" title="Richard Sumilang on GitHub" target="_blank">Github</a>! (Even this blog.)
      </p>
      <p>
        Photographers can see my latest work and behind the scenes on a <a href="//instagram.com/RichardSumilang" title="Richard Sumilang on Instagram">Instagram</a>
      </p>
      <p>

      </p>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Copyright 2019. Richard Sumilang</span>
  </div>
</footer>

</body>
</html>

