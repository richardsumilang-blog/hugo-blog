<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="language" content="english" />
<meta name="robots" content="all" />


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />


<meta name="keywords" content="Apple, exif, ImageMagick, imagick, iOS, iPad, iPhone, Jpeg, PHP, Tiff" />
<meta name="news_keywords" content="Apple, exif, ImageMagick, imagick, iOS, iPad, iPhone, Jpeg, PHP, Tiff" />


<meta property="og:type" content="article" />

<meta property="og:title" content="Working with Apple&#39;s iOS image orientation" />
<meta property="og:site_name" content="Top Secret Labs" />
<meta property="og:url" content="https://www.richardsumilang.com/programming/php/graphics/working-with-apples-ios-image-orientation/" />
<meta property="og:locale" content="en_US" />

  
  
  
  
  <meta property="article:published_time" content="2014-10-17" />
  <meta property="article:modified_time" content="2014-10-17" />




  <meta property="article:tag" content="Apple" /><meta property="article:tag" content="exif" /><meta property="article:tag" content="ImageMagick" /><meta property="article:tag" content="imagick" /><meta property="article:tag" content="iOS" /><meta property="article:tag" content="iPad" /><meta property="article:tag" content="iPhone" /><meta property="article:tag" content="Jpeg" /><meta property="article:tag" content="PHP" /><meta property="article:tag" content="Tiff" />



<meta name="twitter:card" content="summary" />

<meta name="twitter:site" content="@richardsumilang" />
<meta name="twitter:title" content="Working with Apple&#39;s iOS image orientation - Top Secret Labs - Richard Sumilang" />
<meta name="twitter:creator" content="@richardsumilang" />
<meta name="twitter:domain" content="richardsumilang.com" />



<meta name="generator" content="Hugo 0.54.0" />


  <base href="https://www.richardsumilang.com/" />
  <title>Working with Apple&#39;s iOS image orientation - Top Secret Labs - Richard Sumilang</title>

  <link rel="canonical" href="https://www.richardsumilang.com/programming/php/graphics/working-with-apples-ios-image-orientation/" />



  <link rel="stylesheet" type="text/css" href="https://www.richardsumilang.com/_app/main.2797a9753da94e60856c.css" />



<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://www.richardsumilang.com/apple-touch-icon-144-precomposed.png" />
<link rel="shortcut icon" href="https://www.richardsumilang.com/favicon.ico" />



  

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl+ '&gtm_preview=env-7&gtm_auth=j8O4JXfBl0ZE8KUkCt1uKw&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TD3RCSD');</script>



<script>
  var SITE_BASE_URL='https:\/\/www.richardsumilang.com\/';
</script>


  <script defer src="https://www.richardsumilang.com/_app/main.97cea160.js"></script>
  



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TD3RCSD&gtm_preview=env-7&gtm_auth=j8O4JXfBl0ZE8KUkCt1uKw&gtm_cookies_win=x"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  




</head>

<body>


<div id="logo">
  <a href="https://www.richardsumilang.com/"><img src="https://www.richardsumilang.com/images/header-logo.png" /></a>
</div>


<ul id="navigation">
  
  
  <li><a href="/categories/apps" >apps</a></li>
  
  <li><a href="/categories/electronics" >electronics</a></li>
  
  <li><a href="/categories/etc" >etc</a></li>
  
  <li><a href="/categories/networking" >networking</a></li>
  
  <li><a href="/categories/programming" >programming</a></li>
  
  <li><a href="/categories/servers" >servers</a></li>
  
  <li><a href="/categories/unix-like" >unix-like</a></li>
  
</ul>



<section id="articles">
  <article>
    

    <header class="heading">
      <h2><a href="https://www.richardsumilang.com/programming/php/graphics/working-with-apples-ios-image-orientation/">Working with Apple&#39;s iOS image orientation</a></h2>
      
        <h3>Using PHP and ImageMagick</h3>
      
    </header>

    <div class="details">
      <p>You might notice pictures taken with an iOS device (iPhone or iPad) look like
they are not rotated properly when transferring them to another device or
software. This happens because the device is held at a certain angle when the
picture is taken and it&rsquo;s up to the software at the receiving end to display it
however it wants.</p>

<p>Apple&rsquo;s camera will write orientation info into the exif headers of images
taken and you can rotate it accordingly.</p>

<p>Here is an example of rotating an image using PHP with the ImageMagick library;</p>

<pre><code class="language-php" title="Rotate iOS image">&lt;?php

// Rotate iOS image
// @author Richard Sumilang &lt;me@richardsumilang.com&gt;

$imageFile = '/foo/bar.jpg';
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mimeType = finfo_file($finfo, $imageFile);
finfo_close($finfo);

// Detect if jpeg or tiff
if ( in_array($mimeType, ['image/jpeg', 'image/tiff']) ) {
    $exif = exif_read_data($imageFile);
    if ( isset($exif['Orientation']) &amp;&amp; !empty($exif['Orientation']) ) {

        // Decide orientation
        if ( $exif['Orientation'] == 3 ) {
            $rotation = 180;
        } else if ( $exif['Orientation'] == 6 ) {
            $rotation = 90;
        } else if ( $exif['Orientation'] == 8 ) {
            $rotation = -90;
        } else {
            $rotation = 0;
        }

        // Rotate the image
        if ( $rotation ) {
            $imagick = new Imagick();
            $imagick-&gt;readImage($imageFile);
            $imagick-&gt;rotateImage(new ImagickPixel('none'), $rotation);
            $imagick-&gt;writeImage($imageFile);
            $imagick-&gt;clear();
            $imagick-&gt;destroy();
        }

    }
}</code></pre>

<p>Note: Only jpeg and tiff files contain exif information.</p>
    </div>

    
    <div class="tags">
      
      <a href="/tags/apple">Apple</a>
      
      <a href="/tags/exif">exif</a>
      
      <a href="/tags/imagemagick">ImageMagick</a>
      
      <a href="/tags/imagick">imagick</a>
      
      <a href="/tags/ios">iOS</a>
      
      <a href="/tags/ipad">iPad</a>
      
      <a href="/tags/iphone">iPhone</a>
      
      <a href="/tags/jpeg">Jpeg</a>
      
      <a href="/tags/php">PHP</a>
      
      <a href="/tags/tiff">Tiff</a>
      
    </div>
    

    <div class="meta">
      <i class="fa fa-clock-o"></i> Oct 17, 2014
      
        
          <a href="/categories/programming"><i class="fa fa-bookmark"></i> Programming</a>
        
      
    </div>

    <div class="share-buttons">
  <a title="Facebook Share" target="_blank" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fphp%2fgraphics%2fworking-with-apples-ios-image-orientation%2f&t=Working%20with%20Apple%27s%20iOS%20image%20orientation"><span class="fa fa-facebook"></span></a>
  <a title="Twitter Share" target="_blank" href="http://twitter.com/intent/tweet?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fphp%2fgraphics%2fworking-with-apples-ios-image-orientation%2f&text=Working%20with%20Apple%27s%20iOS%20image%20orientation&tw_p=tweetbutton"><span class="fa fa-twitter"></span></a>
  <a title="Google+ Share" target="_blank" href="https://plus.google.com/share?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fphp%2fgraphics%2fworking-with-apples-ios-image-orientation%2f"><span class="fa fa-google-plus"></span></a>
  <a title="Pinterest Share" target="_blank" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.richardsumilang.com%2fprogramming%2fphp%2fgraphics%2fworking-with-apples-ios-image-orientation%2f&media=&description=Working%20with%20Apple%27s%20iOS%20image%20orientation"><span class="fa fa-pinterest"></span></a>
</div>


  </article>

  
<div id="disqus_thread"></div>
<script>
  var disqus_shortname = 'richardsumilang';
  var disqus_identifier = '432 http:\/\/www.richardsumilang.com\/blog\/?p=432';
  var disqus_url = 'https:\/\/www.richardsumilang.com\/programming\/php\/graphics\/working-with-apples-ios-image-orientation\/';

  (function() {
    if (window.location.hostname === "localhost") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


</section>


<footer id="sub-footer">

  <a href="https://photography.richardsumilang.com" title="Photography"><span class="fa fa-camera-retro"></span> Photography</a>

  
  <a href="https://www.youtube.com/richardsumilang" title="YouTube" target="_blank"><span class="fa fa-youtube"></span> YouTube</a>
  

  
  <a href="http://instagram.com/RichardSumilang" title="Follow me on Instagram" target="_blank"><span class="fa fa-instagram"></span> Instagram</a>
  

  
  <a href="http://twitter.com/richardsumilang" title="@richardsumilang on Twitter" target="_blank"><span class="fa fa-twitter"></span> Twitter</a>
  

  
  <a href="http://facebook.com/rsumilang" title="Add me on Facebook" target="_blank"><span class="fa fa-facebook"></span> Facebook</a>
  

  
  <a href="https://www.linkedin.com/in/richardsumilang" title="Linkedin" target="_blank"><span class="fa fa-linkedin"></span> LinkedIn</a>
  

  
  <a href="https://plus.google.com/103897788753346013902/posts" title="Google+" target="_blank"><span class="fa fa-google-plus"></span> Google+</a>
  

  
  <a href="https://www.pinterest.com/rsumilang/" title="Pinterest" target="_blank"><span class="fa fa-pinterest"></span> Pinterest</a>
  

  
  <a href="https://github.com/rsumilang" title="rsumilang on GitHub" target="_blank"><span class="fa fa-github"></span> GitHub</a>
  
</footer>


<footer id="footer">
  <div class="info">
    <div class="column about">
      <h3 class="title">About the Author</h3>
      <p><img width="80" class="user-icon" src="https://www.richardsumilang.com/images/me.png" alt="icon" />
        I'm Richard Sumilang, an artisan, DIY'er, entrepreneur, programmer,
        photographer, etc. Basically, I like to create stuff.
      </p>
      <p>I am based in the Los Angeles area and you can reach me via <a href="mailto:me@richardsumilang.com">email</a>.</p>
    </div>
    <div class="column categories">
      <h3 class="title">Categories</h3>
      <ul>
        
        
        <li><a href="/categories/apps">apps</a></li>
        
        <li><a href="/categories/electronics">electronics</a></li>
        
        <li><a href="/categories/etc">etc</a></li>
        
        <li><a href="/categories/networking">networking</a></li>
        
        <li><a href="/categories/programming">programming</a></li>
        
        <li><a href="/categories/servers">servers</a></li>
        
        <li><a href="/categories/unix-like">unix-like</a></li>
        
      </ul>
    </div>
    <div class="column stay-in-touch">
      <h3 class="title">Stay in touch</h3>
      <p>
        Follow my occasional rants on <a  href="http://twitter.com/richardsumilang" title="@richardsumilang on Twitter" target="_blank">twitter</a>
        or <a href="https://facebook.com/rsumilang" title="Richard Sumilang on Facebook" target="_blank">facebook</a>. From time to time I will also
        post videos on my <a href="richardsumilang" target="_blank">YouTube channel</a>.
      </p>
      <p>Geeks should know that my public work is on
        <a href="https://github.com/rsumilang" title="Richard Sumilang on GitHub" target="_blank">Github</a>! (Even this blog.)
      </p>
      <p>
        Photographers can see my latest work and behind the scenes on a <a href="https://instagram.com/RichardSumilang" title="Richard Sumilang on Instagram">Instagram</a>
      </p>
      <p>

      </p>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Copyright 2019. Richard Sumilang</span>
  </div>
</footer>

</body>
</html>

